<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
      #top {
	  position: fixed;
	  top: 0;
	  left: 0;
	  z-index: 999;
	  width: 100%;
	  height: 23px;
	}

    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAf78YpQTDPoklfb2VuToCLgoGJDIhBzU8&sensor=true&region=BR">
    </script>
    <script type="text/javascript" src="/wsouza/jquery-2.0.2.min.js"></script>
        <script type="text/javascript" src="/wsouza/polygon-estados.js"></script>
    <script type="text/javascript">
      
    var siglaEstados = {
    		
    		"AC":"Acre",
    		"AL":"Alagoas",
    		"AM":"Amazonas",
    		"AP":"Amapa",
    		"BA":"Bahia",
    		"CE":"Ceará",
    		"DF":"Distrito Federal",
    		"ES":"Espírito Santo",
    		"GO":"Goiás",
    		"MA":"Maranhão",
    		"MG":"Minas Gerais",
    		"MS":"Mato Grosso do Sul",
    		"MT":"Mato Grosso",
    		"PA":"Pará",
    		"PB":"Paraíba",
    		"PE":"Pernambuco",
    		"PI":"Piauí",
    		"PR":"Paraná",
    		"RJ":"Rio de Janeiro",
    		"RN":"Rio Grande do Norte",
    		"RO":"Rondônia",
    		"RR":"Roraima",
    		"RS":"Rio Grande do Sul",
    		"SC":"Santa Catarina",
    		"SE":"Sergipe",
    		"SP":"São Paulo",
    		"TO":"Tocantins"
    };
    
    var geocoder = new google.maps.Geocoder();
    var map = null;
    var ultimoDesenho=null;
    var ultimoMarcador=null;
    
    var mapOptions = {
            center: new google.maps.LatLng(-25.42, -49.27),
            zoom: 6,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            streetViewControl: false
          };
    
    function initialize() {
    	  //cwb lat -25.42    Lon: -49.27
        
        map = new google.maps.Map(document.getElementById("map_canvas"),   mapOptions);
      }
    
        
    function accioEstado(sigla){
    	//if(estado || estado.trim().length==0) return;
    	if(ultimoDesenho) ultimoDesenho.setMap(null);
    	
    	var coordsArray = polygonEstadosGeom[sigla].split('|');
    	var desenho = new Array();
    	
    	for (var i = 0; i < coordsArray.length; i++) { 
	    	XY = coordsArray[i].split(','); 
	    	//points.push( new GLatLng(parseFloat(XY[1]),parseFloat(XY[0]))) ;
	    	desenho.push(new google.maps.LatLng(parseFloat(XY[1]), parseFloat(XY[0])));
    	} 
    	
    	
    	bermudaTriangle = new google.maps.Polygon({
    	    paths: desenho,
    	    strokeColor: "#000001",
    	    strokeOpacity: 0.8,
    	    strokeWeight: 1,
    	    //fillColor: "#FF0000",
    	    fillOpacity: 0.15
    	  });
    	 bermudaTriangle.setMap(map);
    	 ultimoDesenho = bermudaTriangle;
    	 
    	 console.log(siglaEstados[sigla]);
    	 
    	geocoder.geocode( { 'address': siglaEstados[sigla]}, function(results, status) {
	    	      if (status == google.maps.GeocoderStatus.OK) {
	    	        map.setCenter(results[0].geometry.location);
	    	        if(ultimoMarcador)ultimoMarcador.setMap(null);
	    	        var marker = new google.maps.Marker({
	    	            map: map,
	    	            animation: google.maps.Animation.DROP,
	    	            position: results[0].geometry.location
	    	        });
	    	        google.maps.event.addListener(marker, 'click', function(){
	    	        	ultimoDesenho.setOptions({fillOpacity:0});
	    	        	
	    	        });
	    	        
	    	        ultimoMarcador=marker;
	    	      } else {
	    	        alert('Geocode was not successful for the following reason: ' + status);
	    	      }
	    });
    	
    	map.setZoom(mapOptions.zoom);
    }
    
    </script>
  </head>
  <body onload="initialize()">
  <div id="top" style="background-color:black;"> 
  <label style="color:white"><b>Estado:<b></label>
  <select id="estados" onchange="accioEstado($(this).val())">
	<option value="AC" selected="selected">Acre </option>
<option value="AL" >Alagoas </option>
<option value="AM" >Amazonas </option>
<option value="AP" >Amap&aacute; </option>
<option value="BA" >Bahia </option>
<option value="CE" >Cear&aacute; </option>
<option value="DF" >Distrito Federal </option>
<option value="ES" >Esp&iacute;rito Santo </option>
<option value="GO" >Goi&aacute;s </option>
<option value="MA" >Maranh&atilde;o </option>
<option value="MG" >Minas Gerais </option>
<option value="MS" >Mato Grosso do Sul </option>
<option value="MT" >Mato Grosso </option>
<option value="PA" >Par&aacute; </option>
<option value="PB" >Para&iacute;ba </option>
<option value="PE" >Pernambuco </option>
<option value="PI" >Piau&iacute; </option>
<option value="PR" >Paran&aacute; </option>
<option value="RJ" >Rio de Janeiro </option>
<option value="RN" >Rio Grande do Norte </option>
<option value="RO" >Rond&ocirc;nia </option>
<option value="RR" >Roraima </option>
<option value="RS" >Rio Grande do Sul </option>
<option value="SC" >Santa Catarina </option>
<option value="SE" >Sergipe </option>
<option value="SP" >S&atilde;o Paulo </option>
<option value="TO" >Tocantins </option>

  </select>
  <label style="color:white"><b>Buscar:<b></label> 
  	
  	<input type="text" />  
  
  </div>
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html>